<!DOCTYPE html>
<html>
  <head>
    <title>Beefcore</title>
  </head>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Open Graph tags for Discord embed -->
    <meta property="og:title" content="Beefcore" />
    <meta property="og:description" content="somethin" />
    <meta
      property="og:image"
      content="https://raw.githubusercontent.com/MinimackStudios/image-hosting/refs/heads/main/misc/steak.jpg"
    />
    <meta property="og:image:width" content="300" />
    <meta property="og:image:height" content="200" />
    <meta property="og:url" content="https://beefcore.github.io" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Minimack Studios" />
    <!-- Theme color for Discord embed accent -->
    <meta name="theme-color" content="#ff0033" />
    <!-- Twitter Card tags for broader compatibility -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Beefcore" />
    <meta name="twitter:description" content="somethin" />
    <meta
      name="twitter:image"
      content="https://raw.githubusercontent.com/MinimackStudios/image-hosting/refs/heads/main/misc/steak.jpg"
    />
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        align-items: center;
        background-color: #f0f0f0;
        justify-content: center;
        height: 100vh;
        display: flex; /* Default to visible, hidden by script if redirect succeeds */
      }
      .message-box {
        padding: 15px 25px;
        border: 2px solid #ff0000;
        border-radius: 10px;
        background-color: #ffffff;
        color: #ff0000;
        font-size: 22px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .main-message {
        margin-bottom: 10px;
      }
      .sub-message {
        font-size: 14px;
        color: #a60000;
        font-weight: bold;
        text-align: center;
      }
      .emoji {
        margin-left: 1px;
      }
    </style>
  </head>
  <body id="errorPage">
    <div class="message-box">
      <div class="main-message">
        Welp, looks like Beefcore is currently down... Check back soon!
        <span class="emoji">ðŸ¥©</span>
      </div>
      <div class="sub-message">
        Would you still like to continue to
        <a href="https://beefcore.loca.lt" style="color: #c20202"
          >https://beefcore.loca.lt</a
        >? Chances are you'll be unable to reach the website.
      </div>
    </div>

    <script>
      // Attempt immediate redirect with 503 check
      const redirectUrl = "https://beefcore.loca.lt";
      const timeoutMs = 500; // Increased timeout for reliability

      // Function to check 503 - Tunnel Unavailable
      function checkAndRedirect() {
        let redirectTimer = setTimeout(() => {
          console.log("Timeout reached, showing error page");
          // If no response within timeout, keep error page visible
        }, timeoutMs);

        const controller = new AbortController();
        const signal = controller.signal;

        fetch(redirectUrl, {
          method: "GET",
          mode: "cors",
          cache: "no-cache",
          signal: signal,
          redirect: "manual",
        })
          .then((response) => {
            if (!response.ok) {
              return response.text().then((text) => {
                clearTimeout(redirectTimer);
                if (text.includes("503 - Tunnel Unavailable")) {
                  console.log("Detected 503 - Tunnel Unavailable");
                  // Keep error page visible
                } else {
                  window.location.href = redirectUrl;
                }
              });
            } else {
              clearTimeout(redirectTimer);
              window.location.href = redirectUrl;
            }
          })
          .catch((error) => {
            console.log("Fetch error:", error);
            clearTimeout(redirectTimer);
            // Keep error page visible on error
          });

        // Abort fetch if timeout is reached
        redirectTimer = setTimeout(() => controller.abort(), timeoutMs);
      }

      // Run immediately
      checkAndRedirect();
    </script>
  </body>
</html>
